"use strict";function updateStaticCache(){return caches.open(staticCacheName).then(function(e){// These items must be cached for the Service Worker to complete installation
// These items won't block the installation of the Service Worker
return e.addAll(["wp-content/uploads/2008/06/depone-16x9-640x360.jpg",themePath+"assets/img/depone.svg",themePath+"assets/img/depone.png"].concat(offlinePages)),e.addAll([themePath+"style.css",themePath+"assets/js/global.min.js",themePath+"offline.html"])})}function stashInCache(e,t,n){caches.open(e).then(function(e){return e.put(t,n)})}// Limit the number of items in a specified cache.
function trimCache(n,a){caches.open(n).then(function(t){t.keys().then(function(e){e.length>a&&t.delete(e[0]).then(trimCache(n,a))})})}// Remove caches whose name is no longer valid
function clearOldCaches(){return caches.keys().then(function(e){return Promise.all(e.filter(function(e){return!cacheList.includes(e)}).map(function(e){return caches.delete(e)}))})}var version="v0.03::",staticCacheName=version+"static",pagesCacheName="pages",imagesCacheName="images",themePath="wp-content/themes/netz/",cacheList=[staticCacheName,pagesCacheName,imagesCacheName],offlinePages=["/","/projekte/","/infos/","/kontakt/","/blog/"];self.addEventListener("install",function(e){e.waitUntil(updateStaticCache().then(function(){return self.skipWaiting()}))}),self.addEventListener("activate",function(e){e.waitUntil(clearOldCaches().then(function(){return self.clients.claim()}))}),self.addEventListener("message",function(e){"trimCaches"==e.data.command&&(trimCache(pagesCacheName,35),trimCache(imagesCacheName,20))}),self.addEventListener("fetch",function(e){var n=e.request,a=new URL(n.url);// Ignore requests to some directories
n.url.match("/wp-admin/")||n.url.match("/preview=true/")||// Ignore non-GET requests
"GET"===n.method&&(// For HTML requests, try the network first, fall back to the cache, finally the offline page
n.headers.get("Accept").includes("text/html")?e.respondWith(fetch(n).then(function(e){
// NETWORK
// Stash a copy of this page in the pages cache
var t=e.clone();return offlinePages.includes(a.pathname)||offlinePages.includes(a.pathname+"/")?stashInCache(staticCacheName,n,t):stashInCache(pagesCacheName,n,t),e}).catch(function(){
// CACHE or FALLBACK
return caches.match(n).then(function(e){return e||caches.match(themePath+"offline.html")})})):// For non-HTML requests, look in the cache first, fall back to the network
e.respondWith(caches.match(n).then(function(e){
// CACHE
return e||fetch(n).then(function(e){
// NETWORK
// If the request is for an image, stash a copy of this image in the images cache
if(n.headers.get("Accept").includes("image")){var t=e.clone();stashInCache(imagesCacheName,n,t)}return e}).catch(function(){
// OFFLINE
// If the request is for an image, show an offline placeholder
if(n.headers.get("Accept").includes("image"))return new Response('<svg role="img" aria-labelledby="offline-title" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg"><title id="offline-title">Offline</title><g fill="none" fill-rule="evenodd"><path fill="#D8D8D8" d="M0 0h400v300H0z"/><text fill="#9B9B9B" font-family="Helvetica Neue,Arial,Helvetica,sans-serif" font-size="72" font-weight="bold"><tspan x="93" y="172">offline</tspan></text></g></svg>',{headers:{"Content-Type":"image/svg+xml","Cache-Control":"no-store"}})})})))});
//# sourceMappingURL=serviceworker.min.js.map