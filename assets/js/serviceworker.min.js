var version="v0.0.1:",theme_path="wp-content/themes/netz/",offlineFundamentals=["./",theme_path+"assets/js/global.min.js",theme_path+"offline.html"],updateStaticCache=function(){return caches.open(version+"fundamentals").then(function(e){return Promise.all(offlineFundamentals.map(function(t){var n=new Request(t);return new URL(n.url).origin!=location.origin&&(n=new Request(t,{mode:"no-cors"})),fetch(n).then(function(t){var i=t.clone();return e.put(n,i)})}))})},clearOldCaches=function(){return caches.keys().then(function(e){return Promise.all(e.filter(function(e){return 0!=e.indexOf(version)}).map(function(e){return caches.delete(e)}))})},limitCache=function(e,t){e.keys().then(function(n){n.length>t&&e.delete(n[0])})},trimCache=function(e,t){caches.open(e).then(function(n){n.keys().then(function(i){i.length>t&&n.delete(i[0]).then(trimCache(e,t))})})};self.addEventListener("install",function(e){e.waitUntil(updateStaticCache().then(function(){return self.skipWaiting()}))}),self.addEventListener("message",function(e){"trimCache"==e.data.command&&(trimCache(version+"pages",25),trimCache(version+"images",10),trimCache(version+"assets",30))}),self.addEventListener("fetch",function(e){var t=function(t){var n=t.clone();return-1!=e.request.headers.get("Accept").indexOf("text/html")?caches.open(version+"pages").then(function(t){t.put(e.request,n).then(function(){limitCache(t,25)})}):-1!=e.request.headers.get("Accept").indexOf("image")?caches.open(version+"images").then(function(t){t.put(e.request,n).then(function(){limitCache(t,10)})}):caches.open(version+"assets").then(function t(i){i.put(e.request,n)}),t},n=function(){if(-1!=e.request.headers.get("Accept").indexOf("text/html"))return caches.match(e.request).then(function(e){return e||caches.match(theme_path+"offline.html")})};if(!e.request.url.match(/wp-admin/)&&!e.request.url.match(/preview=true/)&&"GET"==e.request.method)return-1!=e.request.headers.get("Accept").indexOf("text/html")?void e.respondWith(fetch(e.request).then(t,n)):void e.respondWith(caches.match(e.request).then(function(i){return i||fetch(e.request).then(t,n)}))}),self.addEventListener("activate",function(e){e.waitUntil(clearOldCaches().then(function(){return self.clients.claim()}))});